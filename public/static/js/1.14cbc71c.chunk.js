(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{102:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.default=s},106:function(e,t,n){"use strict";var a,c=n(1),o=n(118),s=n.n(o),i=n(5),r=n.n(i),l=n(12),u=n(3),d=n(96),m=n(124),p=n.n(m),j=n(125),b=n.n(j),_=n(126),h=n.n(_),f=n(127),x=n.n(f),O=n(128),v=n.n(O),g=n(129),k=n.n(g),C=n(43),y=n(119),P=n.n(y),L=n(15),N=n(42),I=n(14),M=n(88),w=n(120),z=n.n(w),T=n(83),E=n(16),H=n(26),S=n(0),D=function(e){var t=Object(T.a)(),n=t.value,a=t.valueChangeHandler,o=t.setValue,s=Object(T.a)(),i=s.value,u=s.valueChangeHandler,d=s.setValue,m=Object(E.a)(),p=m.isLoading,j=m.error,b=m.sendRequest,_=m.clearError,h=e.id,f=e.token;Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("".concat("https://mern-book-social.herokuapp.com/api","/posts/").concat(h),"GET",null,{Authorization:"Bearer ".concat(f)});case 3:t=e.sent,o(t.post.caption),d(t.post.location),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[h,b,o,d,f]);var x=function(){var t=Object(l.a)(r.a.mark((function t(a){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b("".concat("https://mern-book-social.herokuapp.com/api","/posts/").concat(e.id),"PATCH",JSON.stringify({caption:n,location:i}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)});case 4:c=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:if(c){t.next=11;break}return t.abrupt("return");case 11:e.onUpdate(!0),e.onClose();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[j&&Object(S.jsx)(L.a,{onClose:_,text:j,onlyBack:!0,overlay:!0}),Object(S.jsxs)(N.a,{header:"Update Post",footer:Object(S.jsxs)(c.Fragment,{children:[Object(S.jsx)(I.a,{onClick:e.onClose,danger:!0,children:"Close"}),Object(S.jsx)(I.a,{type:"submit",inverse:!0,children:"Update"})]}),footerClass:z.a.footer,onClose:e.onClose,onSubmit:x,mainClass:p?z.a.main:"",children:[p&&Object(S.jsx)(H.a,{center:!0}),!p&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(M.a,{for:"caption",label:"Caption",textarea:!0,onChange:a,value:n}),Object(S.jsx)(M.a,{for:"location",label:"Location",onChange:u,value:i})]})]})]})},F=n(18),A=n(121),B=n.n(A),U=n(102),V=n.n(U),J=n(122),R=n.n(J),K=n(123),q=n.n(K),Z=function(e){return Object(S.jsxs)("li",{className:q.a["comment-list__item"],children:[Object(S.jsxs)("div",{className:q.a["img-container"],children:[Object(S.jsx)("img",{src:"".concat("https://mern-book-social.herokuapp.com","/").concat(e.userPic),alt:e.username}),Object(S.jsx)("h3",{children:e.username})]}),Object(S.jsx)("p",{children:e.comment})]})},G=function(e){var t=Object(c.useRef)(),n=e.comments;return Object(c.useEffect)((function(){n&&t.current.scrollIntoView({behavior:"smooth"})}),[n]),Object(S.jsxs)("ul",{className:R.a.comments,children:[e.comments.length>0&&e.comments.map((function(e){return Object(S.jsx)(Z,{id:e.id,username:e.name,userPic:e.image,comment:e.comment},e.id)})),0===e.comments.length&&Object(S.jsx)("h1",{className:R.a["comment__error-text"],children:"No Comments"}),Object(S.jsx)("div",{ref:t})]})},X=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),o=n[0],s=n[1],i=e.postId,m=e.name,p=e.image,j=e.token,b=e.updateCount,_=Object(T.a)(),h=_.value,f=_.valueChangeHandler,x=_.setValue,O=Object(E.a)(),v=O.isLoading,g=O.error,k=O.sendRequest,C=O.clearError;Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("".concat("https://mern-book-social.herokuapp.com/api","/posts/comments/").concat(i),"GET",null,{Authorization:"Bearer ".concat(j)});case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:s(t.comments),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[k,i,j]),Object(c.useEffect)((function(){Object(d.a)("https://mern-book-social.herokuapp.com").on("update-comment",(function(e){s((function(t){return[].concat(Object(F.a)(t),[e.comment])}))})),b()}),[b]);var y=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=!0,e.prev=2,e.next=5,k("".concat("https://mern-book-social.herokuapp.com/api","/posts/comments/"),"POST",JSON.stringify({name:m,image:p,postId:i,comment:h}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:a=!1,x("");case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[g&&Object(S.jsx)(L.a,{onClose:C,text:g,onlyBack:!0,overlay:!0}),Object(S.jsxs)(N.a,{header:"Comments",onClose:e.onClose,onSubmit:y,footer:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(M.a,{textarea:!0,placeholder:"Add a Comment, ".concat(m),rows:"3",onChange:f,value:h}),Object(S.jsx)("div",{className:B.a["comment-actions"],children:Object(S.jsxs)(I.a,{type:"submit",children:[Object(S.jsx)(V.a,{})," ",a&&v?"Adding...":"Add"]})})]}),children:[Object(S.jsx)(G,{comments:o}),v&&Object(S.jsx)(H.a,{center:!0})]})]})},Y=n(7),Q=function(e,t){return"LIKED"===t.type?e.isLiked?{isLiked:!e.isLiked,likesCount:e.likesCount-1}:{isLiked:!e.isLiked,likesCount:e.likesCount+1}:"IS_LIKED"===t.type?{isLiked:t.isLiked,likesCount:t.likesCount}:e},W=function(e){var t=Object(c.useReducer)(Q,{isLiked:e.isLiked,likesCount:e.likesCount}),n=Object(u.a)(t,2),a=n[0],o=n[1],s=Object(c.useContext)(Y.a),i=e.id,m=Object(E.a)(),j=m.isLoading,_=m.error,f=m.sendRequest,O=m.clearError,g=Object(c.useState)(!1),y=Object(u.a)(g,2),N=y[0],I=y[1],M=Object(c.useState)(!1),w=Object(u.a)(M,2),z=w[0],T=w[1],H=Object(c.useState)(!1),F=Object(u.a)(H,2),A=F[0],B=F[1],U=Object(c.useState)(!1),V=Object(u.a)(U,2),J=V[0],R=V[1],K=Object(c.useState)(e.commentsCount),q=Object(u.a)(K,2),Z=q[0],G=q[1],W=function(){var t=Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("".concat("https://mern-book-social.herokuapp.com/api","/posts/likes/").concat(e.id),"PATCH",JSON.stringify({userId:s.userData.id}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:o({type:"LIKED"});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("".concat("https://mern-book-social.herokuapp.com/api","/posts/").concat(e.id),"DELETE",null,{Authorization:"Bearer ".concat(s.token)});case 3:n=t.sent,console.log(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:I(!1),e.onUpdate(!0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(d.a)("https://mern-book-social.herokuapp.com").on("delete",(function(e){R(e===i)}))}),[i]);var ee=Object(c.useCallback)((function(){G((function(e){return e+1}))}),[]);return Object(S.jsxs)(c.Fragment,{children:[_&&Object(S.jsx)(L.a,{onClose:O,text:_,onlyBack:!0,overlay:!0}),N&&Object(S.jsx)(L.a,{onConfirm:$,onClose:function(){I(!1)},text:"This Post will be deleted and cant't be restored",overlay:!0,isLoading:j}),z&&Object(S.jsx)(D,{id:e.id,token:s.token,onClose:function(){T(!1)},onUpdate:e.onUpdate}),A&&Object(S.jsx)(X,{postId:e.id,name:s.userData.name,image:s.userData.image,token:s.token,updateCount:ee,onClose:function(){B(!1)}}),Object(S.jsx)(C.a,{children:Object(S.jsxs)("li",{children:[Object(S.jsxs)("div",{className:P.a["img-container"],children:[Object(S.jsx)("img",{src:"".concat("https://mern-book-social.herokuapp.com","/").concat(e.userPic),alt:"profile_pic"}),Object(S.jsx)("h3",{children:e.username})]}),Object(S.jsxs)("div",{className:P.a["time-and-location__info"],children:[Object(S.jsxs)("p",{children:[Object(S.jsx)(p.a,{}),e.time]}),e.feeling&&Object(S.jsx)("p",{children:e.feeling}),e.location&&Object(S.jsxs)("p",{children:[Object(S.jsx)(b.a,{}),e.location]})]}),Object(S.jsx)("hr",{}),Object(S.jsxs)("div",{className:P.a["post-caption-and-data__info"],children:[Object(S.jsx)("p",{children:Object(S.jsx)("i",{children:e.caption})}),e.image&&!e.image.includes("undefined")&&Object(S.jsx)("div",{className:P.a["post-img__container"],children:Object(S.jsx)("img",{src:"".concat("https://mern-book-social.herokuapp.com","/").concat(e.image),alt:e.username})})]}),Object(S.jsx)("hr",{}),J&&Object(S.jsx)("h4",{className:P.a["delete-text"],children:"This Post Got Deleted"}),!J&&Object(S.jsxs)("div",{className:P.a["post-actions"],children:[Object(S.jsxs)("div",{className:P.a["post-actions__like"],children:[Object(S.jsx)("span",{className:"".concat(P.a["".concat(a.isLiked&&"active")]," ").concat(P.a["".concat(a.isLiked&&"bump")]),children:a.likesCount}),Object(S.jsxs)("button",{className:P.a["".concat(a.isLiked&&"active")],onClick:W,children:[Object(S.jsx)(h.a,{}),"Like"]})]}),Object(S.jsxs)("div",{className:P.a["post-actions__comment"],children:[Object(S.jsx)("span",{children:Z}),Object(S.jsxs)("button",{onClick:function(){B(!0)},children:[Object(S.jsx)(x.a,{}),"Comment"]})]}),e.userId===s.userData.id&&Object(S.jsx)("div",{className:P.a["post-actions__edit"],children:Object(S.jsxs)("button",{onClick:function(){T(!0)},children:[Object(S.jsx)(v.a,{}),"Edit"]})}),e.userId===s.userData.id&&Object(S.jsx)("div",{className:P.a["post-actions__delete"],children:Object(S.jsxs)("button",{onClick:function(){I(!0)},children:[Object(S.jsx)(k.a,{}),"Delete"]})})]})]})})]})};t.a=function(e){var t=e.posts,n=Object(c.useContext)(Y.a);return Object(S.jsxs)("ul",{className:s.a["post-list__items"],style:e.style,children:[e.updatedPost&&t.length>0&&Object(S.jsx)(I.a,{inverse:!0,className:s.a["load-more-btn"],onClick:e.onUpdate,children:"New Post"}),t.length>0&&t.map((function(t){var a,c=Date.now()-new Date(t.createdAt).getTime(),o=Math.round(c/1e3),s=Math.round(o/60),i=Math.round(s/60),r=Math.round(i/24),l=Math.round(r/30),u=Math.round(l/12);return a=o<60?"".concat(o," sec ago"):s<60?"".concat(s," min ago"):i<24?"".concat(i," h ago"):r?"".concat(r," day ago"):l?"".concat(l," m ago"):"".concat(u," y ago"),Object(S.jsx)(W,{id:t.id,username:t.userId.name,caption:t.caption,image:t.imageURL,location:t.location,time:a,feeling:t.feeling,userPic:t.userId.image,userId:t.userId.id,likesCount:t.likes.length,commentsCount:t.comments.length,onUpdate:e.onUpdate,isLiked:!!t.likes.find((function(e){return e.toString()===n.userData.id}))},t.id)})),0===t.length&&Object(S.jsx)("h1",{className:s.a.errorText,children:"No Post Found."}),Object(S.jsxs)("div",{className:s.a["post-list__actions"],children:[e.page===e.totalPages&&t.length>0&&Object(S.jsx)("h1",{className:s.a.errorText,children:"No More Post to Scroll."}),e.page>1&&Object(S.jsx)(I.a,{inverse:!0,className:s.a["load-more-btn"],onClick:e.onPrev,children:e.isLoading?"Loading..":"Prev"}),0!==t.length&&e.page!==e.totalPages&&Object(S.jsx)(I.a,{inverse:!0,className:s.a["load-more-btn"],onClick:e.onNext,children:e.isLoading?"Loading..":"Next"})]})]})}},118:function(e,t,n){e.exports={"post-list__items":"PostList_post-list__items__1NVyQ","load-more-btn":"PostList_load-more-btn__2ZB-x",errorText:"PostList_errorText__luhRH"}},119:function(e,t,n){e.exports={"img-container":"PostItem_img-container__38tKZ","img-container__info":"PostItem_img-container__info__kBPA1","time-and-location__info":"PostItem_time-and-location__info__g7YUy","post-caption-and-data__info":"PostItem_post-caption-and-data__info__3NvZ3","post-img__container":"PostItem_post-img__container__Z-4my","post-actions":"PostItem_post-actions__2E6CM","post-actions__like":"PostItem_post-actions__like__3bW1x","post-actions__comment":"PostItem_post-actions__comment__3J3cI",active:"PostItem_active__kgMlL","post-actions__delete":"PostItem_post-actions__delete__1uJBN","post-actions__edit":"PostItem_post-actions__edit__2scBx",bump:"PostItem_bump__1iKoO","delete-text":"PostItem_delete-text__6-9-K"}},120:function(e,t,n){e.exports={footer:"UpdatePost_footer__38zky",main:"UpdatePost_main__a7Ja7"}},121:function(e,t,n){e.exports={"comment-actions":"Comment_comment-actions__33Mpq"}},122:function(e,t,n){e.exports={comments:"CommentList_comments__22y_3","comment__error-text":"CommentList_comment__error-text__1S5_a"}},123:function(e,t,n){e.exports={"comment-list__item":"CommentItem_comment-list__item__3Xlil","img-container":"CommentItem_img-container__345IX","img-container__info":"CommentItem_img-container__info__2szoR"}},124:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"History");t.default=s},125:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"LocationOn");t.default=s},126:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");t.default=s},127:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Comment");t.default=s},128:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=s},129:function(e,t,n){"use strict";var a=n(10);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(11)),o=n(0),s=(0,c.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=s},83:function(e,t,n){"use strict";var a=n(3),c=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),n=Object(a.a)(t,2),o=n[0],s=n[1],i=Object(c.useCallback)((function(e){s(e.target.value)}),[]);return{value:o,valueChangeHandler:i,setValue:s}}},88:function(e,t,n){"use strict";n(1);var a=n(91),c=n.n(a),o=n(0);t.a=function(e){var t=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{htmlFor:e.for,children:e.label}),Object(o.jsx)("input",{type:e.type||"text",onChange:e.onChange,value:e.value,placeholder:e.placeholder})]});return e.textarea&&(t=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{htmlFor:e.for,children:e.label}),Object(o.jsx)("textarea",{type:e.type||"text",rows:e.rows||3,onChange:e.onChange,value:e.value,placeholder:e.placeholder})]})),e.dual&&(t=Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:c.a["input-container__dual-div"],children:[Object(o.jsx)("label",{htmlFor:e.forOne,children:e.labelOne}),Object(o.jsx)("input",{type:e.typeOne||"text",onChange:e.onChangeOne,value:e.valueOne,placeholder:e.placeholder})]}),Object(o.jsxs)("div",{className:c.a["input-container__dual-div"],children:[Object(o.jsx)("label",{htmlFor:e.forTwo,children:e.labelTwo}),Object(o.jsx)("input",{type:e.typeTwo||"text",onChange:e.onChangeTwo,value:e.valueTwo,placeholder:e.placeholder})]})]})),Object(o.jsx)("div",{className:e.dual?c.a["input-container__dual"]:"".concat(c.a["input-container"]," ").concat(e.msg&&c.a.msg),children:t})}},91:function(e,t,n){e.exports={"input-container":"Input_input-container__3uy4l","input-container__dual":"Input_input-container__dual__1HZ6I","input-container__dual-div":"Input_input-container__dual-div__nEqMd",msg:"Input_msg__1eA6Y"}}}]);
//# sourceMappingURL=1.14cbc71c.chunk.js.map