(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{136:function(e,t,n){e.exports={"profile-pic__img-container":"Profile_profile-pic__img-container__1aKaV","show-detail__btn":"Profile_show-detail__btn__3Fdk0",active:"Profile_active__vkGGC","profile-info__container":"Profile_profile-info__container__2BwID","profile-info__container-action":"Profile_profile-info__container-action__3eLZH"}},137:function(e,t,n){e.exports={footer:"UpdateProfile_footer__3gGpw"}},140:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),c=n(18),r=n(12),i=n(3),l=n(1),s=n(136),u=n.n(s),p=n(106),j=n(14),f=n(137),b=n.n(f),d=n(42),h=n(88),O=n(83),x=n(15),v=n(16),g=n(0),_=function(e){var t=Object(O.a)(e.profile.bio),n=t.value,a=t.valueChangeHandler,c=Object(O.a)(e.profile.relationship),i=c.value,s=c.valueChangeHandler,u=Object(O.a)(e.profile.at),p=u.value,f=u.valueChangeHandler,_=Object(O.a)(e.profile.occupation),m=_.value,k=_.valueChangeHandler,C=Object(O.a)(e.profile.school),w=C.value,A=C.valueChangeHandler,T=Object(O.a)(e.profile.college),y=T.value,P=T.valueChangeHandler,S=Object(v.a)(),U=S.isLoading,N=S.error,B=S.sendRequest,D=S.clearError,H=function(){var t=Object(r.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,B("".concat("https://mern-book-social.herokuapp.com/api","/users/").concat(e.id),"PATCH",JSON.stringify({school:w,college:y,at:p,occupation:m,bio:n,relationship:i}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:e.onUpdate(),e.onClose();case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(d.a,{header:"Update Profile",footer:Object(g.jsxs)(l.Fragment,{children:[Object(g.jsx)(j.a,{onClick:e.onClose,danger:!0,children:"Close"}),Object(g.jsx)(j.a,{type:"submit",inverse:!0,children:U?"Updating....":"Update"})]}),footerClass:b.a.footer,onClose:e.onClose,onSubmit:H,children:Object(g.jsxs)(g.Fragment,{children:[N&&Object(g.jsx)(x.a,{onClose:D,text:N,onlyBack:!0,overlay:!0}),Object(g.jsx)(h.a,{for:"bio",label:"Bio",value:n,onChange:a}),Object(g.jsx)(h.a,{dual:!0,label:"Education",forOne:"school",labelOne:"School",valueOne:w,onChangeOne:A,forTwo:"college",labelTwo:"College",valueTwo:y,onChangeTwo:P}),Object(g.jsx)(h.a,{dual:!0,label:"Work",forOne:"occupation",labelOne:"Occupation",valueOne:m,onChangeOne:k,forTwo:"at",labelTwo:"At",valueTwo:p,onChangeTwo:f}),Object(g.jsx)(h.a,{for:"relationship",label:"Relationship",value:i,onChange:s})]})})},m=function(e){return Object(g.jsxs)("p",{children:[Object(g.jsx)("b",{children:Object(g.jsx)("u",{children:e.label})})," ",Object(g.jsx)("span",{children:e.text})]})},k=n(7),C=function(e){var t=Object(l.useState)([]),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(l.useState)(!1),f=Object(i.a)(s,2),b=f[0],d=f[1],h=Object(l.useState)(!0),O=Object(i.a)(h,2),C=O[0],w=O[1],A=Object(l.useState)(!1),T=Object(i.a)(A,2),y=T[0],P=T[1],S=Object(l.useContext)(k.a),U=e.profile,N=e.profilePosts,B=e.token,D=e.id;Object(l.useEffect)((function(){N&&c(N.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})))}),[N]);var H=Object(v.a)(),E=H.isLoading,F=H.error,G=H.sendRequest,R=H.clearError,z=function(){var t=Object(r.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G("".concat("https://mern-book-social.herokuapp.com/api","/users/friends/add/").concat(D),"PATCH",JSON.stringify({friendId:e.profile._id.toString()}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(B)});case 3:a=t.sent,console.log(a),e.onAdd(),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)(l.Fragment,{children:[F&&Object(g.jsx)(x.a,{onClose:R,text:F,onlyBack:!0,overlay:!0}),y&&Object(g.jsx)(_,{onClose:function(){P(!1)},id:U.id,profile:U,onUpdate:e.onUpdate,token:B}),e.profile.image&&Object(g.jsxs)("div",{className:u.a["profile-pic__img-container"],children:[!C&&Object(g.jsx)("img",{src:"".concat("https://mern-book-social.herokuapp.com","/").concat(e.profile.image),alt:"".concat(e.profile.name,"_pic")}),Object(g.jsx)("h2",{children:e.profile.name}),e.profile.bio&&Object(g.jsx)("p",{children:Object(g.jsx)("i",{children:e.profile.bio})}),Object(g.jsx)(j.a,{className:"".concat(u.a["show-detail__btn"]," ").concat(b&&u.a.active),inverse:!0,onClick:function(){w(!1),d(!0)},children:"Show Profile Info"}),Object(g.jsx)(j.a,{className:"".concat(u.a["show-detail__btn"]," ").concat(C&&u.a.active),inverse:!0,onClick:function(){d(!1),w(!0)},children:"Posts"})]}),Object(g.jsx)("hr",{}),b&&Object(g.jsxs)("div",{className:u.a["profile-info__container"],children:[Object(g.jsx)("h1",{children:"Profile Info"}),Object(g.jsx)(m,{label:"School:",text:U.school?U.school:"N.A."}),Object(g.jsx)(m,{label:"College:",text:U.college?U.college:"N.A."}),Object(g.jsx)(m,{label:"Work:",text:U.occupation||U.at?"".concat(U.occupation," ").concat(U.at&&"at"," ").concat(U.at):"N.A."}),Object(g.jsx)(m,{label:"Relationship:",text:U.relationship?U.relationship:"N.A."}),Object(g.jsx)(m,{label:"Friends:",text:U.friends.includes(S.userData.id)?U.friends.length>1?"have You and ".concat(U.friends.length-1," more friends"):"You are friends with him":"have ".concat(U.friends.length," Friends")})]}),b&&Object(g.jsxs)("div",{className:u.a["profile-info__container-action"],children:[S.userData.id===U.id&&Object(g.jsx)(j.a,{onClick:function(){P(!0)},children:"Update Profile"}),S.userData.id!==U.id&&Object(g.jsx)(j.a,{onClick:z,children:U.friends.includes(S.userData.id)?E?"Unfriending...":"Unfriend":"Add Friend"})]}),e.profile.image&&C&&Object(g.jsx)(p.a,{posts:a,onUpdate:e.onUpdate})]})},w=n(2),A=n(26);t.default=function(){var e=Object(w.h)().pid,t=Object(l.useState)({}),n=Object(i.a)(t,2),a=n[0],s=n[1],u=Object(l.useState)([]),p=Object(i.a)(u,2),j=p[0],f=p[1],b=Object(l.useContext)(k.a),d=b.token,h=Object(v.a)(),O=h.isLoading,_=h.error,m=h.sendRequest,T=h.clearError;Object(l.useEffect)((function(){var t=function(){var t=Object(r.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m("".concat("https://mern-book-social.herokuapp.com/api","/users/").concat(e),"GET",null,{Authorization:"Bearer ".concat(d)});case 3:n=t.sent,s(n.user),f(Object(c.a)(n.posts)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[e,m,d]);var y=function(){var t=function(){var t=Object(r.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m("".concat("https://mern-book-social.herokuapp.com/api","/users/").concat(e),"GET",null,{Authorization:"Bearer ".concat(d)});case 3:n=t.sent,s(n.user),f(Object(c.a)(n.posts)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()};return Object(g.jsxs)(g.Fragment,{children:[_&&Object(g.jsx)(x.a,{onClose:T,text:_,onlyBack:!0,overlay:!0}),O&&Object(g.jsx)(A.a,{center:!0}),a&&Object(g.jsx)(C,{profile:a,profilePosts:j,onUpdate:y,onAdd:y,token:d,id:b.userData.id})]})}}}]);
//# sourceMappingURL=8.50edaa5a.chunk.js.map